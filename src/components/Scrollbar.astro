---
---

<style>
  .custom-scrollbar {
    --cs-pad-vertical: 0px;
    --cs-width: 3px;
    --cs-pad-right: 2px;

    position: relative;
    overflow: hidden;
    height: calc(100vh - var(--cs-pad-vertical));

    @media (max-width: calc(800px - 1px)) {
        height: auto;
    }
  }

  .custom-scrollbar-content {
    height: calc(100vh - var(--cs-pad-vertical) - 50px);
    
    @media (max-width: calc(800px - 1px)) {
        height: auto;
    }
    
    display: flex;
    flex-direction: column;
    overflow-y: scroll;
    scrollbar-width: none;
  }

  .custom-scrollbar-content::-webkit-scrollbar {
    display: none;
  }

  .custom-scrollbar-track {
    position: absolute;
    width: var(--cs-width);
    margin-right: var(--cs-pad-right);
    margin-top: var(--cs-pad-vertical);
    margin-bottom: var(--cs-pad-vertical);
    right: 0;
    top: 0;
    bottom: 0;
    background: #eee;
  }

  .custom-scrollbar-thumb {
    position: absolute;
    width: var(--cs-width);
    margin-right: var(--cs-pad-right);
    background: #d1d1d1;
    cursor: pointer;
  }

  .custom-scrollbar-thumb:hover {
    background: black;
  }
</style>

<div class="custom-scrollbar">
  <div id="scrollable-content" class="custom-scrollbar-content">
    <slot />
  </div>
  <div id="scrollbar-track" class="custom-scrollbar-track">
    <div id="scrollbar-thumb" class="custom-scrollbar-thumb"></div>
  </div>
</div>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const content = document.getElementById('scrollable-content');
    const thumb = document.getElementById('scrollbar-thumb');
    const track = document.getElementById('scrollbar-track');

    if (!content || !thumb || !track) return;

    const calculateThumbHeight = () => {
      const contentHeight = content.scrollHeight;
      const visibleHeight = content.clientHeight;
      const ratio = visibleHeight / contentHeight;
      thumb.style.height = `${visibleHeight * ratio}px`;
      content.dataset.scrollRatio = `${ratio}`;
      track.style.display = contentHeight > visibleHeight ? 'block' : 'none';
    };

    const handleScroll = () => {
      const scrollTop = content.scrollTop;
      const scrollRatio = parseFloat(content.dataset.scrollRatio || '0');
      thumb.style.top = `${scrollTop * scrollRatio}px`;
    };

    const handleThumbMouseDown = (event: MouseEvent) => {
      const startY = event.clientY;
      const startTop = thumb.offsetTop;
      const scrollRatio = parseFloat(content.dataset.scrollRatio || '0');

      const handleMouseMove = (moveEvent: MouseEvent) => {
        const deltaY = moveEvent.clientY - startY;
        content.scrollTop = (startTop + deltaY) / scrollRatio;
      };

      const handleMouseUp = () => {
        document.removeEventListener('mousemove', handleMouseMove);
        document.removeEventListener('mouseup', handleMouseUp);
      };

      document.addEventListener('mousemove', handleMouseMove);
      document.addEventListener('mouseup', handleMouseUp);
    };

    content.addEventListener('scroll', handleScroll);
    thumb.addEventListener('mousedown', handleThumbMouseDown);
    window.addEventListener('resize', calculateThumbHeight);

    calculateThumbHeight();
  });
</script>
